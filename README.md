# 概要
* anthropicのサンプルをベースにクライアントMCPを作成した

# 仕様
* anthropicのサンプルでは`node build/index.js path/to/build/index.js`のように、第1引数にローカルMCPサーバーのパスを指定する必要があったが、どのMCPサーバーを使うかもMCPクライアント内でよしなに選択させるようにした
  * LLMを使用（プログラムでは精度が悪かったため）
* 1回の質問におけるLLMの呼び出し回数は2回（MCPサーバーの選択と、MCPサーバーを呼び出し他あとの回答の生成）
* 現時点では、必ずTool Useする仕様になっている

# 使い方
* ビルド（index.tsをindex.jsにビルド）
```
npm run build  
```
* MCPクライアントの起動
```
node build/index.js
```
* 2段階のフローで回答する
  * 1. ユーザーは質問を入力する
    * ユーザーの質問をもとに、ローカルに存在する2つのMCPサーバー（アメリカの都市の天気予報と警告を取得するMCPサーバー・Link-AG MCPサーバーをリスト）から適切なMCPサーバーを返答
  * 2. ユーザーは提示されたMCPサーバーの使用で問題なければ「ok」と回答
    * 「ok」の場合、そのMCPサーバーを仕様して回答を生成
    * それ以外の場合、1に戻る
    * LLMを使用

# 使用例
```
ニューヨークの明日の天気は？

ニューヨークの明日の警報は？

Link-AGの下記の成果を取得し、
①全体の成果数を出力して
②検索対象の発生日時を出力して
③全メディアごとの成果数を表にして（件数が少ないメディアであっても省略しないで全件記載して。表の最終行に「合計数」という行を作って表の件数の合計値を記載して）
・広告ID: 8283, 8294, 8408, 8551, 8552
・発生日時: 2025/7/1〜7/15
・アウトプット項目: メディアID、メディア名、リファラ、sid
```

# ファイルについて
* index_anthoropic_api.ts
  * ❓
* index_gemini_api.ts
* index.ts

# 未対応
* Tool Useしない場合の質問も返答するようにする
* UIを作成したい（Pythonの streamlit）
* 「昨日」の解釈ができない
* MCPの選択から回答まで一貫して行う
* LLMがよしなにMCP複数組み合わせて回答する